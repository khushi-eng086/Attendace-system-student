<!DOCTYPE html>
<html>
<head>
    <title>Edit Attendance</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .success { color: green; border: 1px solid green; padding: 10px; margin-bottom: 15px; }
        .error { color: red; }
        table { border-collapse: collapse; width: 60%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        form { margin-top: 20px; }
        button { padding: 10px 15px; background-color: #007BFF; color: white; border: none; cursor: pointer; border-radius: 4px; }
        button:hover { background-color: #0056b3; }
        .logout { float: right; text-decoration: none; color: #007BFF; }
        hr { margin: 20px 0; }
        input[type="radio"] { margin-left: 15px; }
        .nav-links a { margin-right: 20px; }
    </style>
</head>
<body>
    <div class="nav-links">
        <a href="{{ url_for('dashboard') }}">Back to Dashboard</a>
        <a href="{{ url_for('logout') }}" class="logout">Logout</a>
    </div>

    <h2>Edit Attendance for {{ selected_date }}</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form action="{{ url_for('edit_attendance') }}" method="POST">
        <input type="hidden" name="attendance_date" value="{{ selected_date }}">
        <table>
            <thead>
                <tr>
                    <th>Student Name</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student.username }}</td>
                    <td>
                        <input type="radio" id="present_{{ student.id }}" name="student_{{ student.id }}" value="Present" {% if attendance_status.get(student.id) == 'Present' %}checked{% endif %} required>
                        <label for="present_{{ student.id }}">Present</label>
                        <input type="radio" id="absent_{{ student.id }}" name="student_{{ student.id }}" value="Absent" {% if attendance_status.get(student.id) == 'Absent' %}checked{% endif %}>
                        <label for="absent_{{ student.id }}">Absent</label>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <br>
        <button type="submit">Update Attendance</button>
    </form>
</body>
</html>